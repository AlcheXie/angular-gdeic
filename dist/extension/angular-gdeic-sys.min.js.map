{"version":3,"sources":["webpack:////extension/angular-gdeic-sys.min.js","webpack:///webpack/bootstrap a06a659234b84eb10635?abaf*","webpack:///D:/My Project/angular-gdeic/extension/index-sys.js","webpack:///D:/My Project/angular-gdeic/extension/sys/account-role-model.js","webpack:///D:/My Project/angular-gdeic/extension/sys/outree-model.js","webpack:///D:/My Project/angular-gdeic/extension/sys/sys-resource.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","ngModule","angular","$cAccountRoleModelFactory","$q","$gdeic","$cToggleModel","$gdeicSysResource","$cAccountRoleModel","account","this","Accounts","Roles","ManageOu","LockoutEnabled","constructor","Object","length","some","u","prototype","save","isAdmin","isUnifyManageOu","accounts","copy","items","deferred","defer","resolve","i","max","Ou","httpPromise","saveAccount","then","data","reason","reject","promise","lock","_lock","uid","lockAccount","msg","notify","accountIds","Ids","promises","push","all","getManageOuString","arr","DnName","match","OuName","reverse","join","factory","$inject","$cOutreeModelFactory","$cOutreeModel","outree","_source","getSource","Id","ParentId","SubOus","setSubOus","map","ou","setAccounts","queryOuAccounts","ouId","$gdeicSysResourceFactory","$resource","getAccountInfo","url","method","getHeader","queryAccount","queryAccountByKeyword","params","keyword","queryRole","queryRoleAdmin","saveRole","removeRole","roleId","queryMenu","queryParentMenu","saveMenu","removeMenu","menuId","initOutree","getOuTree"],"mappings":"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","file":"/extension/angular-gdeic-sys.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!**********************************************************!*\\\n  !*** D:/My Project/angular-gdeic/extension/index-sys.js ***!\n  \\**********************************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ngModule = angular.module('ngGdeicSys', ['ngGdeic']);\r\n\t\r\n\t__webpack_require__(/*! ./sys/sys-resource */ 12)(ngModule);\r\n\t__webpack_require__(/*! ./sys/account-role-model */ 10)(ngModule);\r\n\t__webpack_require__(/*! ./sys/outree-model */ 11)(ngModule);\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */\n/*!***********************************************************************!*\\\n  !*** D:/My Project/angular-gdeic/extension/sys/account-role-model.js ***!\n  \\***********************************************************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = function (ngModule) {\r\n\t    'use strict';\r\n\t\r\n\t    ngModule.factory('$cAccountRoleModel', $cAccountRoleModelFactory);\r\n\t\r\n\t    $cAccountRoleModelFactory.$inject = ['$q', '$gdeic', '$cToggleModel', '$gdeicSysResource'];\r\n\t\r\n\t    function $cAccountRoleModelFactory($q, $gdeic, $cToggleModel, $gdeicSysResource) {\r\n\t        function $cAccountRoleModel(account) {\r\n\t            account = account || [];\r\n\t\r\n\t            this.Accounts = null;\r\n\t            this.Roles = null;\r\n\t            this.ManageOu = null;\r\n\t            this.LockoutEnabled = false;\r\n\t\r\n\t            if (account.constructor === Object) {\r\n\t                account = [account];\r\n\t            }\r\n\t            this.Accounts = new $cToggleModel(account, 'Id');\r\n\t            if (account.length === 1) {\r\n\t                this.Roles = new $cToggleModel(account[0].Roles, 'Id');\r\n\t                this.ManageOu = account[0].ManageOu;\r\n\t                this.LockoutEnabled = account[0].LockoutEnabled;\r\n\t            } else {\r\n\t                this.Roles = new $cToggleModel('Id');\r\n\t                if (account.length > 0) {\r\n\t                    this.LockoutEnabled = !(account.some(function (u) {\r\n\t                        return u.LockoutEnabled === false;\r\n\t                    }));\r\n\t                } else {\r\n\t                    this.LockoutEnabled = false;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t\r\n\t        $cAccountRoleModel.prototype.save = function (isAdmin, isUnifyManageOu) {\r\n\t            isAdmin = isAdmin || false;\r\n\t            isUnifyManageOu = isUnifyManageOu || false;\r\n\t\r\n\t            var accounts = angular.copy(this.Accounts.items), deferred = $q.defer();\r\n\t\r\n\t            if (accounts.length === 0) {\r\n\t                deferred.resolve(this.Accounts);\r\n\t            } else {\r\n\t                var i = 0, max = accounts.length, account;\r\n\t                for (; i < max; i++) {\r\n\t                    account = accounts[i];\r\n\t                    if (this.Roles.items.length > 0) {\r\n\t                        account.Roles = this.Roles.items;\r\n\t                    }\r\n\t                    if (isAdmin) {\r\n\t                        if (isUnifyManageOu) {\r\n\t                            account.ManageOu = this.ManageOu;\r\n\t                        } else {\r\n\t                            account.ManageOu = account.Ou;\r\n\t                        }\r\n\t                    } else {\r\n\t                        account.ManageOu = null;\r\n\t                    }\r\n\t                    account.LockoutEnabled = this.LockoutEnabled;\r\n\t                }\r\n\t\r\n\t                $gdeic.httpPromise($gdeicSysResource.saveAccount(accounts)).then(function (data) {\r\n\t                    deferred.resolve(data);\r\n\t                }, function (reason) {\r\n\t                    deferred.reject(reason);\r\n\t                });\r\n\t            }\r\n\t\r\n\t            return deferred.promise;\r\n\t        }\r\n\t        $cAccountRoleModel.prototype.lock = function () {\r\n\t            var accountIds = this.Accounts.Ids, promises = [];\r\n\t            for (var i = 0, max = accountIds.length; i < max; i++) {\r\n\t                promises.push(_lock(accountIds[i]));\r\n\t            }\r\n\t            return $q.all(promises);\r\n\t\r\n\t            function _lock(uid) {\r\n\t                var deferred = $q.defer();\r\n\t                $gdeic.httpPromise($gdeicSysResource.lockAccount({ uid: uid })).then(function (data) {\r\n\t                    deferred.resolve(data);\r\n\t                }, function (reason) {\r\n\t                    deferred.reject(reason);\r\n\t                }, function (msg) {\r\n\t                    deferred.notify(msg);\r\n\t                });\r\n\t\r\n\t                return deferred.promise;\r\n\t            }\r\n\t        }\r\n\t        $cAccountRoleModel.prototype.getManageOuString = function () {\r\n\t            if (!this.ManageOu) {\r\n\t                return '';\r\n\t            }\r\n\t\r\n\t            var arr = (this.ManageOu.DnName || '').match(/[\\u4e00-\\u9fa5]+/g);\r\n\t            if (!arr) {\r\n\t                return this.ManageOu.OuName;\r\n\t            } else {\r\n\t                if (this.ManageOu.OuName === arr[0]) {\r\n\t                    return arr.reverse().join(' - ');\r\n\t                } else {\r\n\t                    return arr.reverse().join(' - ') + ' - ' + (this.ManageOu.OuName || '');\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t\r\n\t        return $cAccountRoleModel;\r\n\t    }\r\n\t};\n\n/***/ },\n/* 11 */\n/*!*****************************************************************!*\\\n  !*** D:/My Project/angular-gdeic/extension/sys/outree-model.js ***!\n  \\*****************************************************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = function (ngModule) {\r\n\t    'use strict';\r\n\t\r\n\t    ngModule.factory('$cOutreeModel', $cOutreeModelFactory);\r\n\t\r\n\t    $cOutreeModelFactory.$inject = ['$q', '$gdeic', '$gdeicSysResource'];\r\n\t\r\n\t    function $cOutreeModelFactory($q, $gdeic, $gdeicSysResource) {\r\n\t        function $cOutreeModel(outree) {\r\n\t            var _source = outree;\r\n\t\r\n\t            this.getSource = function () {\r\n\t                return _source;\r\n\t            }\r\n\t\r\n\t            this.Id = outree.Id;\r\n\t            this.OuName = outree.OuName;\r\n\t            this.DnName = outree.DnName;\r\n\t            this.ParentId = outree.ParentId;\r\n\t            this.SubOus = null;\r\n\t            this.Accounts = null;\r\n\t        }\r\n\t\r\n\t        $cOutreeModel.prototype.setSubOus = function () {\r\n\t            var outree = this.getSource();\r\n\t            this.SubOus = outree.SubOus.map(function (ou, i) {\r\n\t                return new $cOutreeModel(outree.SubOus[i]);\r\n\t            });\r\n\t        }\r\n\t        $cOutreeModel.prototype.setAccounts = function () {\r\n\t            var ou = this, deferred = $q.defer();\r\n\t\r\n\t            if (!ou.Accounts) {\r\n\t                $gdeic.httpPromise($gdeicSysResource.queryOuAccounts({ ouId: ou.Id })).then(function (data) {\r\n\t                    ou.Accounts = data;\r\n\t                    deferred.resolve(data);\r\n\t                }, function (reason) {\r\n\t                    deferred.reject(reason);\r\n\t                });\r\n\t            } else {\r\n\t                deferred.resolve(ou.Accounts);\r\n\t            }\r\n\t\r\n\t            return deferred.promise;\r\n\t        }\r\n\t\r\n\t        return $cOutreeModel;\r\n\t    }\r\n\t};\n\n/***/ },\n/* 12 */\n/*!*****************************************************************!*\\\n  !*** D:/My Project/angular-gdeic/extension/sys/sys-resource.js ***!\n  \\*****************************************************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = function (ngModule) {\r\n\t    'use strict';\r\n\t\r\n\t    ngModule.factory('$gdeicSysResource', $gdeicSysResourceFactory);\r\n\t\r\n\t    $gdeicSysResourceFactory.$inject = ['$resource'];\r\n\t\r\n\t    function $gdeicSysResourceFactory($resource) {\r\n\t        return $resource('api/account', {}, {\r\n\t            getAccountInfo: {\r\n\t                url: 'api/account/account',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            getHeader: {\r\n\t                url: 'api/account/header',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryAccount: {\r\n\t                url: 'api/account/get-accounts',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryAccountByKeyword: {\r\n\t                url: 'api/account/ou-accounts/search/:keyword',\r\n\t                params: { keyword: '@keyword' },\r\n\t                method: 'GET'\r\n\t            },\r\n\t            saveAccount: {\r\n\t                url: 'api/account/add-accounts',\r\n\t                method: 'POST'\r\n\t            },\r\n\t            lockAccount: {\r\n\t                url: 'api/account/lock-account/:uid',\r\n\t                params: { uid: '@uid' },\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryRole: {\r\n\t                url: 'api/account/get-roles',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryRoleAdmin: {\r\n\t                url: 'api/account/get-roles-admin',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            saveRole: {\r\n\t                url: 'api/account/add-role',\r\n\t                method: 'POST'\r\n\t            },\r\n\t            removeRole: {\r\n\t                url: 'api/account/remove-role/:roleId',\r\n\t                params: { roleId: '@roleId' },\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryMenu: {\r\n\t                url: 'api/account/get-menus',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryParentMenu: {\r\n\t                url: 'api/account/get-parentmenus',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            saveMenu: {\r\n\t                url: 'api/account/add-menu',\r\n\t                method: 'POST'\r\n\t            },\r\n\t            removeMenu: {\r\n\t                url: 'api/account/remove-menu/:menuId',\r\n\t                params: { menuId: '@menuId' },\r\n\t                method: 'GET'\r\n\t            },\r\n\t            initOutree: {\r\n\t                url: 'api/account/init-ou',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            getOuTree: {\r\n\t                url: 'api/account/ou-tree',\r\n\t                method: 'GET'\r\n\t            },\r\n\t            queryOuAccounts: {\r\n\t                url: 'api/account/ou-accounts/:ouId',\r\n\t                params: { ouId: '@ouId' },\r\n\t                method: 'GET'\r\n\t            }\r\n\t        });\r\n\t    }\r\n\t};\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** /extension/angular-gdeic-sys.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a06a659234b84eb10635\n **/","var ngModule = angular.module('ngGdeicSys', ['ngGdeic']);\r\n\r\nrequire('./sys/sys-resource')(ngModule);\r\nrequire('./sys/account-role-model')(ngModule);\r\nrequire('./sys/outree-model')(ngModule);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** D:/My Project/angular-gdeic/extension/index-sys.js\n ** module id = 0\n ** module chunks = 2\n **/","module.exports = function (ngModule) {\r\n    'use strict';\r\n\r\n    ngModule.factory('$cAccountRoleModel', $cAccountRoleModelFactory);\r\n\r\n    $cAccountRoleModelFactory.$inject = ['$q', '$gdeic', '$cToggleModel', '$gdeicSysResource'];\r\n\r\n    function $cAccountRoleModelFactory($q, $gdeic, $cToggleModel, $gdeicSysResource) {\r\n        function $cAccountRoleModel(account) {\r\n            account = account || [];\r\n\r\n            this.Accounts = null;\r\n            this.Roles = null;\r\n            this.ManageOu = null;\r\n            this.LockoutEnabled = false;\r\n\r\n            if (account.constructor === Object) {\r\n                account = [account];\r\n            }\r\n            this.Accounts = new $cToggleModel(account, 'Id');\r\n            if (account.length === 1) {\r\n                this.Roles = new $cToggleModel(account[0].Roles, 'Id');\r\n                this.ManageOu = account[0].ManageOu;\r\n                this.LockoutEnabled = account[0].LockoutEnabled;\r\n            } else {\r\n                this.Roles = new $cToggleModel('Id');\r\n                if (account.length > 0) {\r\n                    this.LockoutEnabled = !(account.some(function (u) {\r\n                        return u.LockoutEnabled === false;\r\n                    }));\r\n                } else {\r\n                    this.LockoutEnabled = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        $cAccountRoleModel.prototype.save = function (isAdmin, isUnifyManageOu) {\r\n            isAdmin = isAdmin || false;\r\n            isUnifyManageOu = isUnifyManageOu || false;\r\n\r\n            var accounts = angular.copy(this.Accounts.items), deferred = $q.defer();\r\n\r\n            if (accounts.length === 0) {\r\n                deferred.resolve(this.Accounts);\r\n            } else {\r\n                var i = 0, max = accounts.length, account;\r\n                for (; i < max; i++) {\r\n                    account = accounts[i];\r\n                    if (this.Roles.items.length > 0) {\r\n                        account.Roles = this.Roles.items;\r\n                    }\r\n                    if (isAdmin) {\r\n                        if (isUnifyManageOu) {\r\n                            account.ManageOu = this.ManageOu;\r\n                        } else {\r\n                            account.ManageOu = account.Ou;\r\n                        }\r\n                    } else {\r\n                        account.ManageOu = null;\r\n                    }\r\n                    account.LockoutEnabled = this.LockoutEnabled;\r\n                }\r\n\r\n                $gdeic.httpPromise($gdeicSysResource.saveAccount(accounts)).then(function (data) {\r\n                    deferred.resolve(data);\r\n                }, function (reason) {\r\n                    deferred.reject(reason);\r\n                });\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n        $cAccountRoleModel.prototype.lock = function () {\r\n            var accountIds = this.Accounts.Ids, promises = [];\r\n            for (var i = 0, max = accountIds.length; i < max; i++) {\r\n                promises.push(_lock(accountIds[i]));\r\n            }\r\n            return $q.all(promises);\r\n\r\n            function _lock(uid) {\r\n                var deferred = $q.defer();\r\n                $gdeic.httpPromise($gdeicSysResource.lockAccount({ uid: uid })).then(function (data) {\r\n                    deferred.resolve(data);\r\n                }, function (reason) {\r\n                    deferred.reject(reason);\r\n                }, function (msg) {\r\n                    deferred.notify(msg);\r\n                });\r\n\r\n                return deferred.promise;\r\n            }\r\n        }\r\n        $cAccountRoleModel.prototype.getManageOuString = function () {\r\n            if (!this.ManageOu) {\r\n                return '';\r\n            }\r\n\r\n            var arr = (this.ManageOu.DnName || '').match(/[\\u4e00-\\u9fa5]+/g);\r\n            if (!arr) {\r\n                return this.ManageOu.OuName;\r\n            } else {\r\n                if (this.ManageOu.OuName === arr[0]) {\r\n                    return arr.reverse().join(' - ');\r\n                } else {\r\n                    return arr.reverse().join(' - ') + ' - ' + (this.ManageOu.OuName || '');\r\n                }\r\n            }\r\n        }\r\n\r\n        return $cAccountRoleModel;\r\n    }\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** D:/My Project/angular-gdeic/extension/sys/account-role-model.js\n ** module id = 10\n ** module chunks = 2\n **/","module.exports = function (ngModule) {\r\n    'use strict';\r\n\r\n    ngModule.factory('$cOutreeModel', $cOutreeModelFactory);\r\n\r\n    $cOutreeModelFactory.$inject = ['$q', '$gdeic', '$gdeicSysResource'];\r\n\r\n    function $cOutreeModelFactory($q, $gdeic, $gdeicSysResource) {\r\n        function $cOutreeModel(outree) {\r\n            var _source = outree;\r\n\r\n            this.getSource = function () {\r\n                return _source;\r\n            }\r\n\r\n            this.Id = outree.Id;\r\n            this.OuName = outree.OuName;\r\n            this.DnName = outree.DnName;\r\n            this.ParentId = outree.ParentId;\r\n            this.SubOus = null;\r\n            this.Accounts = null;\r\n        }\r\n\r\n        $cOutreeModel.prototype.setSubOus = function () {\r\n            var outree = this.getSource();\r\n            this.SubOus = outree.SubOus.map(function (ou, i) {\r\n                return new $cOutreeModel(outree.SubOus[i]);\r\n            });\r\n        }\r\n        $cOutreeModel.prototype.setAccounts = function () {\r\n            var ou = this, deferred = $q.defer();\r\n\r\n            if (!ou.Accounts) {\r\n                $gdeic.httpPromise($gdeicSysResource.queryOuAccounts({ ouId: ou.Id })).then(function (data) {\r\n                    ou.Accounts = data;\r\n                    deferred.resolve(data);\r\n                }, function (reason) {\r\n                    deferred.reject(reason);\r\n                });\r\n            } else {\r\n                deferred.resolve(ou.Accounts);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        return $cOutreeModel;\r\n    }\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** D:/My Project/angular-gdeic/extension/sys/outree-model.js\n ** module id = 11\n ** module chunks = 2\n **/","module.exports = function (ngModule) {\r\n    'use strict';\r\n\r\n    ngModule.factory('$gdeicSysResource', $gdeicSysResourceFactory);\r\n\r\n    $gdeicSysResourceFactory.$inject = ['$resource'];\r\n\r\n    function $gdeicSysResourceFactory($resource) {\r\n        return $resource('api/account', {}, {\r\n            getAccountInfo: {\r\n                url: 'api/account/account',\r\n                method: 'GET'\r\n            },\r\n            getHeader: {\r\n                url: 'api/account/header',\r\n                method: 'GET'\r\n            },\r\n            queryAccount: {\r\n                url: 'api/account/get-accounts',\r\n                method: 'GET'\r\n            },\r\n            queryAccountByKeyword: {\r\n                url: 'api/account/ou-accounts/search/:keyword',\r\n                params: { keyword: '@keyword' },\r\n                method: 'GET'\r\n            },\r\n            saveAccount: {\r\n                url: 'api/account/add-accounts',\r\n                method: 'POST'\r\n            },\r\n            lockAccount: {\r\n                url: 'api/account/lock-account/:uid',\r\n                params: { uid: '@uid' },\r\n                method: 'GET'\r\n            },\r\n            queryRole: {\r\n                url: 'api/account/get-roles',\r\n                method: 'GET'\r\n            },\r\n            queryRoleAdmin: {\r\n                url: 'api/account/get-roles-admin',\r\n                method: 'GET'\r\n            },\r\n            saveRole: {\r\n                url: 'api/account/add-role',\r\n                method: 'POST'\r\n            },\r\n            removeRole: {\r\n                url: 'api/account/remove-role/:roleId',\r\n                params: { roleId: '@roleId' },\r\n                method: 'GET'\r\n            },\r\n            queryMenu: {\r\n                url: 'api/account/get-menus',\r\n                method: 'GET'\r\n            },\r\n            queryParentMenu: {\r\n                url: 'api/account/get-parentmenus',\r\n                method: 'GET'\r\n            },\r\n            saveMenu: {\r\n                url: 'api/account/add-menu',\r\n                method: 'POST'\r\n            },\r\n            removeMenu: {\r\n                url: 'api/account/remove-menu/:menuId',\r\n                params: { menuId: '@menuId' },\r\n                method: 'GET'\r\n            },\r\n            initOutree: {\r\n                url: 'api/account/init-ou',\r\n                method: 'GET'\r\n            },\r\n            getOuTree: {\r\n                url: 'api/account/ou-tree',\r\n                method: 'GET'\r\n            },\r\n            queryOuAccounts: {\r\n                url: 'api/account/ou-accounts/:ouId',\r\n                params: { ouId: '@ouId' },\r\n                method: 'GET'\r\n            }\r\n        });\r\n    }\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** D:/My Project/angular-gdeic/extension/sys/sys-resource.js\n ** module id = 12\n ** module chunks = 2\n **/"],"sourceRoot":""}